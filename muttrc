# Identity
set imap_user = "jteppinette@jteppinette.com"
set imap_pass = "`pass show 'Personal/Credentials/Fast Mail/Client'`"

set realname = "Joshua Taylor Eppinette"
set from = $imap_user

set smtp_url = "smtps://$imap_user@smtp.fastmail.com:465/"
set smtp_pass = $imap_pass

set imap_pass = $imap_pass
set imap_user = $from

set folder = "imaps://imap.fastmail.com"

# Mailboxes
set spoolfile = "="
set record = "=Sent"
set postponed = "=Drafts"
set trash = "=Trash"

# Macros
macro index G <imap-fetch-mail>
macro index ,a "<save-message>=Archive<enter><enter-command>echo 'Saved to Archive'<enter>"
macro attach V "<pipe-entry>iconv -c --to-code=UTF8 > ~/.cache/mutt/mail.html<enter><shell-escape>x-www-browser ~/.cache/mutt/mail.html<enter>"

# System
set imap_check_subscribed = yes
set sidebar_visible = yes
set mail_check_stats = yes
set sidebar_format = "%B%?F? [%F]?%* %?N?%N/?%S"
set header_cache = "~/.cache/mutt/header"

alternative_order text/plain text/html
auto_view text/html

# PGP
set crypt_autosign = yes
set crypt_use_gpgme = yes
set crypt_replysignencrypted = yes

# Theme
color normal     default default        # default colours
color index      brightblue default ~N  # new messages
color index      red default ~F         # flagged messages
color index      blue default ~T        # tagged messages
color index      cyan default ~D        # deleted messages
color body       brightyellow default (https?|ftp)://[\-\.+,/%~_:?&=\#a-zA-Z0-9]+
color body       brightgreen default [\-\.+_a-zA-Z0-9]+@[\-\.a-zA-Z0-9]+
color attachment magenta default        # attachments
color signature  brightwhite default    # sigs
color search     brightred black        # highlight results

color indicator  brightyellow default   # currently highlighted message
color error      red default            # error messages
color status     white cyan             # status line
color tree       brightblack default    # thread tree
color tilde      cyan default           # blank line padding

color hdrdefault black cyan             # default headers
color header     brightwhite cyan "^From:"
color header     brightwhite cyan "^Subject:"

color quoted     cyan default           # quote colours
color quoted1    brightcyan default
color quoted2    blue default
color quoted3    green default
color quoted4    yellow default
color quoted5    red default

color body green default        "^gpg: Good signature from"
color body brightred default    "^gpg: Bad signature from"
color body brightred default    "^gpg: BAD signature from"
color body brightred default    "^gpg: Note: This key has expired!"
color body brightyellow default "^gpg: WARNING: This key is not certified with a trusted signature!"
color body brightyellow default "^gpg:          There is no indication that the signature belongs to the owner."
color body brightyellow default "^gpg: can't handle these multiple signatures"
color body brightyellow default "^gpg: signature verification suppressed"
color body brightyellow default "^gpg: invalid node with packet of type"
